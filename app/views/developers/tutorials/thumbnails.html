{{=[[ ]]=}}

<h1>Thumbnails</h1>

<p>This guide explains how Blot selects, builds, and exposes thumbnails for your entries. Use it when building index pages, entry cards, image grids, or when you need thumbnails for social previews.</p>

<h2>How Blot selects a thumbnail</h2>

<p>Blot builds a list of thumbnail candidates in a strict order:<sup>1</sup></p>

<ol>
  <li><code>metadata.thumbnail</code> if present.</li>
  <li>Images in the post HTML in document order.</li>
  <li>Video thumbnails from Vimeo or YouTube embeds.</li>
</ol>

<p>Blot iterates those candidates in order and stops at the first one that yields valid thumbnails.<sup>1</sup></p>

<p>A valid thumbnail must be at least 64×64 and in a supported format (<code>png</code>, <code>jpeg</code>, <code>jpg</code>, <code>svg</code>, <code>gif</code>, <code>webp</code>) or they are ignored.<sup>3</sup></p>

<h2>How thumbnail sizes work (including small images)</h2>

<p>Blot generates four sizes:</p>

<table>
  <thead>
    <tr><th>Size</th><th>Width</th><th>Notes</th></tr>
  </thead>
  <tbody>
    <tr><td>small</td><td>160px</td><td>—</td></tr>
    <tr><td>medium</td><td>640px</td><td>—</td></tr>
    <tr><td>large</td><td>1200px</td><td>—</td></tr>
    <tr><td>square</td><td>160px</td><td>cropped</td></tr>
  </tbody>
</table>

<p>When images are resized, Blot never increases the dimensions of the image.<sup>2</sup></p>

<h2>How to override the thumbnail</h2>

<p>Set the <code>Thumbnail</code> <a href="/how/metadata">metadata</a> field to a path to an image in your folder or a full URL. Blot resolves the path as a dependency.<sup>4</sup></p>

<pre class="text"><code>Thumbnail: ./images/cover.jpg</code></pre>

<h2>How to use the thumbnail object in templates</h2>

<p>Each entry exposes a <code>thumbnail</code> object (see the <a href="/developers/reference#entry">entry reference</a>) with <code>small</code>, <code>medium</code>, <code>large</code>, and <code>square</code> variants. Each variant includes a <code>url</code>, <code>width</code>, and <code>height</code>.<sup>6</sup></p>

<p>Entries with no valid thumbnail candidate have no <code>thumbnail</code> (or it is empty). Guard with <code>{{#thumbnail.medium}}</code> and <code>{{^thumbnail.medium}}</code> so you avoid broken images and can show fallback UI when there is no thumbnail.</p>

<p>Minimal example:</p>

<pre><code>{{#thumbnail.medium}}
  &lt;img
    src="{{{thumbnail.medium.url}}}"
    width="{{thumbnail.medium.width}}"
    height="{{thumbnail.medium.height}}"
    alt="{{title}}"
  &gt;
{{/thumbnail.medium}}
</code></pre>

<p>Without the block guard, you can reference the properties directly (but the template will break on entries without thumbnails):</p>

<pre><code>&lt;img
  src="{{{thumbnail.medium.url}}}"
  width="{{thumbnail.medium.width}}"
  height="{{thumbnail.medium.height}}"
&gt;
</code></pre>

<h2>Responsive images with 3 → 2 → 1 columns</h2>

<p>Blot’s album grid template uses <code>srcset</code> and <code>sizes</code> with the <code>thumbnail</code> widths to let the browser pick the right image.<sup>7</sup> Below is a compact example for a three-column grid that collapses to two and then one. The <code>sizes</code> values should match your breakpoints.</p>

<pre class="code html"><code>&lt;style&gt;
.grid {
  display: grid;
  gap: 1.5rem;
  grid-template-columns: repeat(3, 1fr);
}

@media (max-width: 900px) {
  .grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 600px) {
  .grid {
    grid-template-columns: 1fr;
  }
}
&lt;/style&gt;

&lt;div class="grid"&gt;
  {{#entries}}
  {{#thumbnail.medium}}
  &lt;figure&gt;
    &lt;img
      src="{{{thumbnail.large.url}}}"
      srcset="
        {{{thumbnail.small.url}}} {{thumbnail.small.width}}w,
        {{{thumbnail.medium.url}}} {{thumbnail.medium.width}}w,
        {{{thumbnail.large.url}}} {{thumbnail.large.width}}w
      "
      sizes="(max-width: 600px) 100vw, (max-width: 900px) 50vw, 33vw"
      width="{{thumbnail.medium.width}}"
      height="{{thumbnail.medium.height}}"
      alt="{{title}}"
    &gt;
  &lt;/figure&gt;
  {{/thumbnail.medium}}
  {{/entries}}
&lt;/div&gt;
</code></pre>

<p>In this example, <code>sizes</code> reports one column below 600px, two columns up to 900px, and three columns above 900px. Keep the <code>sizes</code> values in sync with your CSS grid so the browser chooses the correct thumbnail width.</p>

<h2>Implementation reference</h2>
<ol>
  <li>Thumbnail candidates and selection order: <code>app/build/thumbnail/candidates.js</code>, <code>app/build/thumbnail/index.js</code>.</li>
  <li>Thumbnail transformations and no-upscaling behavior: <code>app/build/thumbnail/transform.js</code>.</li>
  <li>Thumbnail validation rules and supported formats: <code>app/build/thumbnail/validate.js</code>, <code>app/build/thumbnail/config.js</code>.</li>
  <li>Thumbnail metadata guidance: <code>app/views/how/metadata.html</code>.</li>
  <li>Dependency resolution for thumbnail metadata paths: <code>app/build/dependencies/index.js</code>.</li>
  <li>Template reference for the thumbnail object: <code>app/views/developers/reference.yml</code>.</li>
  <li>Example usage of <code>srcset</code> and <code>sizes</code> in a grid template: <code>app/templates/source/album/_grid_bookshelf.html</code>.</li>
</ol>

[[={{ }}=]]
